@model WebApplication1.Models.NhapHang
<div class="container topinputarea" style="padding:10px;">
    
  
    @using (Html.BeginForm())
    {

        <div class="row">
            <div class="col-lg-3">
                <i class="fa fa-calendar"></i>
                <span class="textlable">
                    Ngày nhập
                </span>
                <input type="text" id="ngaynhap" class="form-control" required autocomplete="off" />
                @Html.HiddenFor(m => m.NgayNhap, new { id = "ngaynhapreal" })
            </div>

            <div class="col-lg-3">
                <i class="fa fa-calculator"></i>
                <span class="textlable">
                    Số tiền
                </span>
                <input type="text" class="form-control" required id="tongtien" name="tongtien" />
                @*@Html.TextBox(m => m.TongTien, new { @class = "form-control", required = "required", id = "tongtien" })*@
            </div>
            <div class="col-lg-3">
                <i class="fa fa-calculator"></i>
                <span class="textlable">
                    Đã trả
                </span>
                <input type="text" class="form-control" required id="datra" name="datra" />
                @*@Html.TextBoxFor(m => m.DaTra, new { @class = "form-control", required = "required", id = "datra" })*@
            </div>
            <div class="col-lg-3">
                <i class="fa fa-calculator"></i>
                <span class="textlable">
                    Còn nợ
                </span>
                <input type="text" class="form-control" required id="conno" name="conno" />
                @*  @Html.TextBoxFor(m => m.ConNo, new { @class = "form-control", required = "required", id = "conno" })*@
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3" style="position:relative">
                <i class="fa fa-users"></i>
                <span class="textlable">
                    Đối tác
                </span>
                <a class="addCustomerName" href="@Url.Action("AddPartnerDialog","DoiTacs")">
                    <i class="fa fa-plus-square"
                       style="font-size:35px;position:absolute;top:19px;right:15px;color: #0267ff;"></i>
                </a>
                <a class="FullSearch" href="@Url.Action("SearchDialog","DoiTacs")" id="AutoSearch">
                    <i class="fa fa-search autosearchicon" id="auto_SearchButtton"></i>
                    <i class="fa fa-spinner fa-spin autosearchicon" id="loading_Search_icon" style="display:none"></i>
                </a>
                <input type="text" class="form-control" id="AutoSearchPartner" autocomplete="off" />
                <div id="ShowArea" style="">
                </div>
                @Html.HiddenFor(m => m.DoiTac, new { id = "iddoitac" })
            </div>

            <div class="col-lg-6">
                <i class="fa fa-pencil-square-o"></i>
                <span class="textlable">
                    Ghi chú
                </span>
                @Html.TextBoxFor(m => m.GhiChu, new { @class = "form-control" })
            </div>
            <div class="col-lg-3">
                <p></p>
                <div style="margin-top:20px" class="container">
                    <div class="row">
                        <div class="col-xs-6 col-lg-6">
                            <button type="reset" class="btn btn-danger form-control">
                                <i class="fa fa-times"></i>
                                Hủy
                            </button>
                        </div>
                        <div class="col-xs-6 col-lg-6">
                            <button type="submit" class="btn btn-primary form-control">
                                <i class="fa fa-plus"></i>
                                Nhập
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
  
</div>
<div class="">
    @Html.Action("ListNhapHang", "SanPham")
</div>
<script>
    $(document).ready(function () {
        $('#tongtien').number(true, 0);
        $('#datra').number(true, 0);
        $('#conno').number(true, 0);
        $("#ngaynhap").datepicker({
            onSelect: function (selectedDate) {
                var from = selectedDate.split("/")
                var f = from[2] + "/" + from[1] + "/" + from[0];
                $('#ngaynhapreal').val(f);
            }
        }
        );

        $('.addCustomerName').colorbox();
        $('.FullSearch').colorbox({width:'80%',height:'80%'});
    });
    function amountchange() {
        var tongtien = $('#tongtien').val().replace(/,/g, '')
        var datra = $('#datra').val().replace(/,/g, '');
        var conno = tongtien - datra;
        $('#conno').val(conno);
        $('#conno').number(true, 0);

    }
    $('#datra').keyup(function () {
        amountchange();
    });

    function AddPartnerSuccess(data) {
        var json = $.parseJSON(data);
        $('#AutoSearchPartner').val(json['Ten']);
        $('#iddoitac').val(json['Id']);
        $('#cboxClose').click();
        $('#ShowArea').hide();
    }
     $('#AutoSearchPartner').keyup(function () {
        var q = $('#AutoSearchPartner').val();
        if (q.length % 3 == 0 && q.length > 0) {
            $.ajax({
                    url: '@Url.Action("AutoSearchPartner", "DoiTacs")',
                    data: {q:q},
                    success: function (result) {
                        $("#ShowArea").show();
                        $("#ShowArea").html(result);
                        $('#auto_SearchButtton').show();
                        $('#loading_Search_icon').hide();
                    },
                    beforeSend: function () {
                        $('#auto_SearchButtton').hide();
                        $('#loading_Search_icon').show();
                    }
             });
        }
    })
</script>
<style>

    .listareaborder {
        border: solid 1px #ccc;
        /* padding-top: 20px; */
        position: relative;
        padding: 0px;
    }

    .autosearchicon {
        font-size: 35px;
        position: absolute;
        top: 19px;
        right: 50px;
        color: #0267ff
    }

    #ShowArea {
        position: absolute;
        width: 100%;
        background: #daff92;
        z-index: 9;
        border: solid 1px #c1c1c1;
        color: #000;
        display: none
    }
</style>
